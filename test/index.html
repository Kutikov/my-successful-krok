<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>My successful KROK blog</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <meta name="description" content="">
    <meta name="author" content="Damir A. Kutikov, Julia V. Kizurina">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:url" content="https://kutikov.github.io/my-successful-krok/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Blog" />
    <meta property="og:description" content="" />
    <meta property="og:image" content="https://kutikov.github.io/my-successful-krok/blog/header.png" />

  <link href="main.css?id=124" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
  <script src="Unit.js"></script>
  <script src="Fork.js"></script>
  <script src="FireBaseAPI.js"></script>
  <script src="TestAccont.js"></script>
  <script src="QstParsers.js"></script>
</head>

</head>

<body>
    <input type="file" id="upload_file" accept=".qst">
    <script type="text/javascript">
        const firebaseApi = new FireBaseAPI();
        let author = 'Kozlov';

        let currentFork = null;
        let forksArray = [];
        let currentUnit = null;
        let currentUnitsArray = [];
        let currentTestArray = [];

        document.addEventListener('DOMContentLoaded', () => {
            setup('upload_file');
            firebaseApi.readForks(author);
        });

        function coreSignalHandler(signal, mode = ''){
            console.log(signal + ' ' + mode);
            switch(signal){
                case FireBaseAPI.Signals.forksLoaded:
                    currentFork = forksArray[0];
                    firebaseApi.readUnits(currentFork);
                    break;
                case FireBaseAPI.Signals.unitsLoaded:
                    currentUnit = currentUnitsArray[0];
                    firebaseApi.readTests(currentUnit);
                    break;
                case FireBaseAPI.Signals.testsLoaded:
                    //TODO add drawing of tests 
                    break;
            }
        }
    </script>
</body>

</html>