<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Секції</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <meta name="description" content="Секції на XVII Міжнародній науковій конференції студентів, молодих вчених та фахівців 'Актуальні питання сучасної медицини'">
  <meta name="author" content="Damir A. Kutikov, Julia V. Kizurina">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:url"           content="https://kutikov.github.io/my-successful-krok/" />
  <meta property="og:type"          content="website" />
  <meta property="og:title"         content="Секції" />
  <meta property="og:description"   content="Секції на XVII Міжнародній науковій конференції студентів, молодих вчених та фахівців 'Актуальні питання сучасної медицини'" />
  <meta property="og:image"         content="http://medicine.karazin.ua/images/logo.jpg" />

  <link href="main.css?id=124" rel="stylesheet">

</head>

<body>
    <div id="mainHolder" style="display: flex; height: 100%;">
        <div id="mainBackground" class="mainBackground"></div>
        <div id="scrollSource" class="scrollSource">
            <div id="mainCard" class="mainCard">
                <div class="mobileHeader"></div>
                <div id="contentSection">
                    <p id="title" class="title">Заголовок</p>
                    <p id="date" class="date">12 april 2021</p>
                    
                    
                </div>
                <div id="bottomPanel" class="bottomPanel">
                    <div class="bottomPanelLeft">
                        
                    </div>
                    <div id="icon" class="bottomPanelIcon2"></div>
                    <div class="bottomPanelRight">
                        <p id="appname" class="bottomPanelRightTitle">Мой успешный КРОК</p>
                        <p class="bottomPanleRightCopyRight">Damir A. Kutikov © 2018–2021</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="posts.js?id=123" type="text/javascript"></script>
    <script type="text/javascript">
  		const urlParams = new URLSearchParams(window.location.search);
        const language = urlParams.get('language');
        let jsDate = new Date();
        try{
            let dateParts = urlParams.get('date').split("-");
            jsDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2].substr(0,2));
        }
        catch{
        }
        const localized = [
            {id: "title", ru: "Блог разработчиков", ua: "Блог розробників", en: "Developers` blog"},
            {id: "date", ru: "Выберите интересующий пост", ua: "Оберіть пост, що Вас цікавить", en: "Select post, that is interesting for you"},
        ];
        posts = JSON.parse(postsF);
        for(let i = 0; i < posts.length; i++){
            let postIcon = "M20,2A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H6L2,22V4C2,2.89 2.9,2 4,2H20M4,4V17.17L5.17,16H20V4H4M6,7H18V9H6V7M6,11H15V13H6V11Z";
            let downloadIcon = "M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M12,19L8,15H10.5V12H13.5V15H16L12,19Z";
            let template = `<a href="!!link!!" class="file_link">
                        <div class="!!style!!" style="width: auto !important">
                            <svg class="file_icon" viewBox="0 0 24 24">
                                <path fill="#004d40" d="!!icon_path!!" />
                            </svg>
                            <div style="display: flex; flex-direction: column; flex-grow:1;">
                                <p class="file_name">!!title!!</p>
                                <p class="post_date">!!date_str!!</p>
                            </div>
                            <svg class="post_chevron" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                            </svg>
                        </div>
                    </a>`;
            switch(posts[i].type){
                case "letter":
                    template = template.replace("!!icon_path!!", postIcon);
                    break;
                case "load":
                    template = template.replace("!!icon_path!!", downloadIcon);
                    break;
            }
            template = template.replace("!!title!!", posts[i].title.en).replace("!!date_str!!", posts[i].date_str.en);
            switch(language){
                case "ru":
                    template = template.replace("!!title!!", posts[i].title.ru).replace("!!date_str!!", posts[i].date_str.ru);
                    break;
                case "ua":
                    template = template.replace("!!title!!", posts[i].title.ua).replace("!!date_str!!", posts[i].date_str.ua);
                    break;
            }
            template = template.replace("!!link!!", posts[i].link + "?language=" + language + "&date=" + urlParams.get('date'));
            PdateParts = posts[i].date.split("-");
            postDate = new Date(PdateParts[0], PdateParts[1] - 1, PdateParts[2].substr(0,2));
            if(postDate.getTime() < jsDate.getTime()){
                template = template.replace("!!style!!", "file_card");
            }
            else{
                template = template.replace("!!style!!", "file_card new");
            }
            const holder = document.createElement('div');
            holder.innerHTML = template;
            holder.style.marginBottom = '8px';
            document.getElementById("contentSection").appendChild(holder);
        }

        for(let i = 0; i < localized.length; i++){
            let html = localized[i].en;
            switch(language){
                case "ru":
                    html = localized[i].ru;
                    break;
                case "ua":
                    html = localized[i].ua;
                    break;
            }
            document.getElementById(localized[i].id).innerHTML = html;
        }
        console.log(jsDate.toDateString());

        function copyToClipboard() {
            const inputc = document.body.appendChild(document.createElement("input"));
            inputc.value = window.location.href;
            inputc.focus();
            inputc.select();
            document.execCommand('copy');
            inputc.parentNode.removeChild(inputc);
        }   
    </script>
</body>
</html>